webpackJsonp([1],{"2rmZ":function(t,e){},"4Uwr":function(t,e,i){t.exports=i.p+"static/app_img/common/logo.9829a7b.jpg"},"6tBa":function(t,e){},JfbQ:function(t,e){},R2WG:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAnCAYAAADzckPEAAAACXBIWXMAAAsTAAALEwEAmpwYAAAGBWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo4ZjM0YWFlMi1kZDRhLTQyNWQtYTIzZi0xMjU2MDZiZmE5MzQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OTlGMTMyQTQwMURCMTFFOTkyOTFDRTc5ODUzNjNCRDciIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NjY1ZTcwMjEtNGUyNC1mYzRmLWI0YTYtMjU4MTA1MWJhMDIyIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE3IChNYWNpbnRvc2gpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAxOS0wMS0xN1QxNDo1ODoyNSswODowMCIgeG1wOk1vZGlmeURhdGU9IjIwMTktMDEtMTdUMTQ6NTk6MjgrMDg6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMTktMDEtMTdUMTQ6NTk6MjgrMDg6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo3Y2EwNjdkZC01MTU4LTQ4ZDUtOGU1OC1kYjU4ZTAzMzE3YjciIHN0UmVmOmRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDpiYmNiYjZhYS0zOTI5LTExN2MtYWE5Yi1mN2NkYTNhYjlmZjEiLz4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6NjY1ZTcwMjEtNGUyNC1mYzRmLWI0YTYtMjU4MTA1MWJhMDIyIiBzdEV2dDp3aGVuPSIyMDE5LTAxLTE3VDE0OjU5OjI4KzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pt3a2mAAAAIVSURBVFjDtdg7aFRREMbxs4hGC1NIUAtBCKSMIBJMG8TWFCKiIoidKFgEFUFExSJCbEWQiOALFXRBiJ1YmB8SEB9lEJ8IPrBJ4QthbfbCsmTPOffupvi6me9/7+6cOTM3IGSohjGcwHU8wmPUcRmHMNxoNEKOUrC1OIt3aGToKQ52Az2KhUxYu15grAy0hgcVYe06mQNdhuc9Aha6mII+6TGw0PFO0PNLBCy0uR06WCL5Ja5iCvfwPjPvTTu0npE0g9EOhbcHHzM8dhbQdRnBk52OVvH0WI25hM9cAT2cCLwbayCtBYLl+Jbw2xCapp0CfmJFLrQJHk9A9we8igRcSvXlxQ5/4v+dDPgcCRivCL0S8bwW8D0SsKUi9FTE83bAp0jASEXo6YjndEiU+e6K0FsRzzMB05GAOxWhPyKeOwJ2JUp8fckjcyTi9Q/9ASvxOxL4rERz2Ii/Ea96a++9kHjb+81uE2uDw/iS8Blpha7Cr0TCWxzAmjbwIM5l9O+Hi92n45lX1ELzJ5/B68ycP+jvNDncWKILfDw2rtQSHaqKbuZMg6M9BH5FLXfuneoRdGvZYXu+S+BUlQl/qAvgfDe7zERF6FA30IDZksCJbre2gIESwNlerIqF9mVCB3oJzRnI9/ZqKW5VX2RfrecCy0IDtnW4APqWEhqa3xhaodvLAKtCAz4Uw3hZYDfQTTjWaTBL6T+92w18lD8PBQAAAABJRU5ErkJggg=="},aPF0:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("TXMN"),a=i("/ocq"),o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var c=i("VU/8")({name:"storeSearch"},o,!1,function(t){i("zKdP")},null,null).exports,s=i("gRE1"),l=i.n(s),r=i("fZjL"),d=i.n(r),u="http://wmtuat.eloccitane.com/api/member/";console.log("请求接口地址",u);var m={MemberInsert:u+"mobile/member/insert",MemberUpdate:u+"mobile/member/update",QueryByMobile:u+"mobile/member/queryByMobile/",QueryByOpenId:u+"mobile/member/queryByOpenId/",CurrentCity:u+"mobile/region/currentCity",Provinces:u+"mobile/region/provinces",Cities:u+"mobile/region/cities",Districts:u+"mobile/region/districts",FindByCode:u+"mobile/ba/findByCode/",Query:u+"mobile/campaignDetail/query",Verify:u+"mobile/campaignDetail/verify/",AddMobile:u+"mobile/campaignDetail/addMobile",ListAvailable:u+"mobile/campaign/listAvailable",CounterList:u+"mobile/counter/counterList",Send:u+"mobile/code/send",CodeVerify:u+"mobile/code/verify",Login:u+"mobile/auth/login"},p=i("//Fk"),h=i.n(p),v=i("mtWM"),b=i.n(v);function g(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new h.a(function(i,n){b.a.get(t,{params:e}).then(function(t){i(t.data)}).catch(function(t){n(t)})})}b.a.defaults.timeout=5e3,b.a.defaults.baseURL="",b.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded";var A,M,f={},I={name:"store",data:function(){return{panelList:[],currentLocation:"",searchWord:"",areaText:"",title:"",address:"",detailUrl:"",popupVisible:!1,latitude:"",longitude:"",targetLatitude:"",targetLongitude:"",citySlots:[{flex:1,values:d()(f),className:"slot1",textAlign:"center"},{divider:!0,content:"-",className:"slot2"},{flex:1,values:l()(f)[0],className:"slot3",textAlign:"center"}],areaList:{}}},created:function(){},mounted:function(){var t=this;setTimeout(function(){A=new BMap.Map("map",{enableMapClick:!1}),(new BMap.Geolocation).getCurrentPosition(function(e){if(this.getStatus()==BMAP_STATUS_SUCCESS){var i=new BMap.Marker(e.point);A.addOverlay(i),A.panTo(e.point),t.latitude=e.point.lat,t.longitude=e.point.lng,console.log(t.longitude,t.latitude),console.log("您的位置："+e.point.lng+","+e.point.lat);var n={longitude:t.longitude,latitude:t.latitude};t.getCurrentCity(n)}else console.log("failed"+this.getStatus())},{enableHighAccuracy:!1})},600)},methods:{getCurrentCity:function(t){var e=this;(function(t){return g(m.CurrentCity,t)})(t).then(function(t){console.log(t.data),e.currentLocation=t.data.name,e.areaText=t.data.name,e.doSearch(),e.counterList()})},counterList:function(){var t=this,e={longitude:self.longitude,latitude:self.latitude,city:this.currentLocation};console.log(e),function(t){return g(m.CounterList,t)}(e).then(function(e){console.log(e.data),t.panelList=e.data})},getProvinces:function(){var t=this,e={};g(m.Provinces).then(function(i){i.data.forEach(function(i){var n;(n={provinceCode:i.code},g(m.Cities,n)).then(function(n){var a=[];n.data.forEach(function(t){a.push(t.name)}),e[i.name]=a,f=e,t.citySlots[0].values=d()(f),t.citySlots[2].values=l()(f)[0]})})})},choiceArea:function(){this.popupVisible=!0,this.getProvinces()},cancleaddress:function(){this.popupVisible=!1},selectaddress:function(){this.popupVisible=!1,this.doSearch(),this.counterList()},onCityChange:function(t,e){console.log(t,e),t.setSlotValues(1,f[e[0]]),this.currentLocation=e[1]},doSearch:function(){A.centerAndZoom(this.currentLocation,11),A.enableScrollWheelZoom(!0),A.setCurrentCity(this.currentLocation);var t={map:A,autoViewport:!1,selectFirstResult:!1};new BMap.LocalSearch(A,{renderOptions:t})},infohtmlset:function(t,e){this.targetLatitude=t.latitude,this.targetLongitude=t.longitude,this.infoWindow(t,e)},infoWindow:function(t,e){this.title=void 0==t.title?"--":t.title,this.address=t.address;var i={lat:t.latitude,lng:t.longitude},n=new BMap.Point(i.lng,i.lat),a=new BMap.Marker(n);A.addOverlay(a),A.centerAndZoom(n,11);var o="<div>"+this.title+'</div><div style="margin: 6px 0">'+t.address+'</div><a href="https://api.map.baidu.com/direction?origin=latlng:'+this.latitude+","+this.longitude+"|name:我的位置&destination="+this.address+"&mode=driving&region="+this.currentLocation+"&output=html&src=webapp.baidu.openAPIdemo'\">到这里去</a>";console.log(o),(M=new BMap.InfoWindow(o,{width:250,minHeight:45})).disableCloseOnClick(),a.addEventListener("click",function(){A.openInfoWindow(M,n)}),console.log(M),A.enableScrollWheelZoom(!0),A.openInfoWindow(M,A.getCenter())},goDetails:function(){alert(this.address),console.log(this.currentLocation),location.href="https://api.map.baidu.com/direction?origin=latlng:"+this.latitude+","+this.longitude+"|name:我的位置&destination="+this.address+"&mode=driving&region="+this.currentLocation+"&output=html&src=webapp.baidu.openAPIdemo"}}},C={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"map-warpper"},[i("div",{staticClass:"map-box",attrs:{id:"map"}}),t._v(" "),i("div",{staticClass:"panel-box"},t._l(t.panelList,function(e,n){return i("div",{key:n,staticClass:"panel-item",on:{click:function(i){t.infohtmlset(e,n)}}},[t._m(0,!0),t._v(" "),i("div",{staticClass:"text-box"},[i("h2",[t._v(t._s(e.title))]),t._v(" "),i("p",[t._v(t._s(e.address))]),t._v(" "),i("div",{staticClass:"tag"},[i("span",{directives:[{name:"show",rawName:"v-show",value:e.phoneNumber,expression:"item.phoneNumber"}]},[t._v(t._s(e.phoneNumber))]),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:e.distance,expression:"item.distance"}]},[t._v(t._s(e.distance)+"KM")]),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:e.phone,expression:"item.phone"}]},[t._v(t._s(e.phone))])])])])})),t._v(" "),i("div",{staticClass:"select-box",on:{click:t.choiceArea}},[t._m(1),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.areaText,expression:"areaText"}],attrs:{placeholder:"请选择省市",type:"text",readonly:"",disabled:""},domProps:{value:t.areaText},on:{input:function(e){e.target.composing||(t.areaText=e.target.value)}}})]),t._v(" "),i("mt-popup",{staticClass:"mint-popup-4",attrs:{position:"bottom","popup-transition":"popup-fade"},model:{value:t.popupVisible,callback:function(e){t.popupVisible=e},expression:"popupVisible"}},[i("div",{staticClass:"picker-toolbar"},[i("span",{staticClass:"mint-datetime-action mint-datetime-cancel",on:{click:t.cancleaddress}},[t._v("取消")]),t._v(" "),i("span",{staticClass:"mint-datetime-action mint-datetime-confirm",on:{click:t.selectaddress}},[t._v("确定")])]),t._v(" "),i("mt-picker",{attrs:{slots:t.citySlots,"visible-item-count":5},on:{change:t.onCityChange}})],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"logo-box"},[e("img",{attrs:{src:i("4Uwr"),alt:""}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"img-box"},[e("img",{attrs:{src:i("R2WG"),alt:""}})])}]};var w=[{path:"/",component:i("VU/8")(I,C,!1,function(t){i("6tBa")},"data-v-1764c717",null).exports}],L=(i("JfbQ"),i("d8/S"),i("2rmZ"),i("Au9i"));n.a.component(L.Picker.name,L.Picker),n.a.component(L.Popup.name,L.Popup),n.a.use(a.a);var y=new a.a({routes:w});new n.a({el:"#app",router:y,render:function(t){return t(c)}})},"d8/S":function(t,e){},zKdP:function(t,e){}},["aPF0"]);
//# sourceMappingURL=storeSearch.js.map