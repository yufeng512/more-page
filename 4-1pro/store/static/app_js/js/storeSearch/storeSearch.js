webpackJsonp([1],{"2hDx":function(e,t){},"2rmZ":function(e,t){},"4Uwr":function(e,t,i){e.exports=i.p+"static/app_img/common/logo.9829a7b.jpg"},JfbQ:function(e,t){},R2WG:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAnCAYAAADzckPEAAAACXBIWXMAAAsTAAALEwEAmpwYAAAGBWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo4ZjM0YWFlMi1kZDRhLTQyNWQtYTIzZi0xMjU2MDZiZmE5MzQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OTlGMTMyQTQwMURCMTFFOTkyOTFDRTc5ODUzNjNCRDciIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NjY1ZTcwMjEtNGUyNC1mYzRmLWI0YTYtMjU4MTA1MWJhMDIyIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE3IChNYWNpbnRvc2gpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAxOS0wMS0xN1QxNDo1ODoyNSswODowMCIgeG1wOk1vZGlmeURhdGU9IjIwMTktMDEtMTdUMTQ6NTk6MjgrMDg6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMTktMDEtMTdUMTQ6NTk6MjgrMDg6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo3Y2EwNjdkZC01MTU4LTQ4ZDUtOGU1OC1kYjU4ZTAzMzE3YjciIHN0UmVmOmRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDpiYmNiYjZhYS0zOTI5LTExN2MtYWE5Yi1mN2NkYTNhYjlmZjEiLz4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6NjY1ZTcwMjEtNGUyNC1mYzRmLWI0YTYtMjU4MTA1MWJhMDIyIiBzdEV2dDp3aGVuPSIyMDE5LTAxLTE3VDE0OjU5OjI4KzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pt3a2mAAAAIVSURBVFjDtdg7aFRREMbxs4hGC1NIUAtBCKSMIBJMG8TWFCKiIoidKFgEFUFExSJCbEWQiOALFXRBiJ1YmB8SEB9lEJ8IPrBJ4QthbfbCsmTPOffupvi6me9/7+6cOTM3IGSohjGcwHU8wmPUcRmHMNxoNEKOUrC1OIt3aGToKQ52Az2KhUxYu15grAy0hgcVYe06mQNdhuc9Aha6mII+6TGw0PFO0PNLBCy0uR06WCL5Ja5iCvfwPjPvTTu0npE0g9EOhbcHHzM8dhbQdRnBk52OVvH0WI25hM9cAT2cCLwbayCtBYLl+Jbw2xCapp0CfmJFLrQJHk9A9we8igRcSvXlxQ5/4v+dDPgcCRivCL0S8bwW8D0SsKUi9FTE83bAp0jASEXo6YjndEiU+e6K0FsRzzMB05GAOxWhPyKeOwJ2JUp8fckjcyTi9Q/9ASvxOxL4rERz2Ii/Ea96a++9kHjb+81uE2uDw/iS8Blpha7Cr0TCWxzAmjbwIM5l9O+Hi92n45lX1ELzJ5/B68ycP+jvNDncWKILfDw2rtQSHaqKbuZMg6M9BH5FLXfuneoRdGvZYXu+S+BUlQl/qAvgfDe7zERF6FA30IDZksCJbre2gIESwNlerIqF9mVCB3oJzRnI9/ZqKW5VX2RfrecCy0IDtnW4APqWEhqa3xhaodvLAKtCAz4Uw3hZYDfQTTjWaTBL6T+92w18lD8PBQAAAABJRU5ErkJggg=="},aPF0:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("TXMN"),o=i("/ocq"),a={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var c=i("VU/8")({name:"storeSearch"},a,!1,function(e){i("zKdP")},null,null).exports,r=i("gRE1"),s=i.n(r),l=i("fZjL"),u=i.n(l),d="https://crm.eloccitane.com/oushudanapi/member/";console.log("请求接口地址",d);var m={MemberInsert:d+"mobile/member/insert",MemberUpdate:d+"mobile/member/update",QueryByMobile:d+"mobile/member/queryByMobile/",QueryByOpenId:d+"mobile/member/queryByOpenId/",CurrentCity:d+"mobile/region/currentCity",Provinces:d+"mobile/region/provinces",Cities:d+"mobile/region/cities",Districts:d+"mobile/region/districts",FindByCode:d+"mobile/ba/findByCode/",Query:d+"mobile/campaignDetail/query",Verify:d+"mobile/campaignDetail/verify/",AddMobile:d+"mobile/campaignDetail/addMobile",ListAvailable:d+"mobile/campaign/listAvailable",CounterList:d+"mobile/counter/counterList",Send:d+"mobile/code/send",CodeVerify:d+"mobile/code/verify",CheckBind:d+"mobile/member/checkBind",Login:d+"mobile/auth/login",MemberInfo:d+"mobile/member/queryByMobile/",Querypoint:d+"mobile/scoreQuery",MemberCoupon:d+"mobile/member/couponQueryByCode",MemberNoCoupon:d+"mobile/member/couponQuery",MemberScoreQuery:d+"mobile/member/scoreQuery",MemberOrderQuery:d+"mobile/member/orderQuery",GetCardSign:d+"mobile/wx/getCardSign",DecryptCode:d+"mobile/wx/decryptCode",addQuestion:d+"mobile/member/addQuestion",hasPartQues:d+"mobile/member/hasPartQues/",localAPi:"https://crm.eloccitane.com/weixin/wechat/auth/jsapi_signature"},p=i("//Fk"),h=i.n(p),b=i("mtWM"),v=i.n(b);function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new h.a(function(i,n){v.a.get(e,{params:t}).then(function(e){i(e.data)}).catch(function(e){n(e)})})}function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new h.a(function(i,n){v.a.post(e,t).then(function(e){console.log(e),i(e.data)},function(e){n(e)})})}v.a.defaults.timeout=5e3,v.a.defaults.baseURL="",v.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded";var A,M,w={},y={name:"store",data:function(){return{panelList:[],currentLocation:"",searchWord:"",areaText:"",title:"",address:"",detailUrl:"",popupVisible:!1,isShow:!1,latitude:"",longitude:"",targetLatitude:"",targetLongitude:"",citySlots:[{flex:1,values:u()(w),className:"slot1",textAlign:"center"},{divider:!0,content:"-",className:"slot2"},{flex:1,values:s()(w)[0],className:"slot3",textAlign:"center"}],areaList:{}}},created:function(){},mounted:function(){var e=this;setTimeout(function(){var t;A=new BMap.Map("map",{enableMapClick:!1}),(t={originId:"gh_4b16ea1dcc6f",url:"https://crm.eloccitane.com/wmth5/storeSearch.html"},f(m.localAPi+"?originId="+t.originId+"&url="+t.url)).then(function(t){wx.config({debug:!1,appId:t.appId,timestamp:t.timestamp,nonceStr:t.nonceStr,signature:t.signature,url:t.url,jsApiList:["getLocation"]}),wx.ready(function(){wx.getLocation({type:"wgs84",success:function(t){e.latitude=t.latitude,e.longitude=t.longitude;var i={longitude:e.longitude,latitude:e.latitude};e.getCurrentCity(i)},fail:function(e){alert("fail")}})})})},600)},methods:{getCurrentCity:function(e){var t=this;(function(e){return g(m.CurrentCity,e)})(e).then(function(e){t.currentLocation=e.data.name,t.areaText=e.data.name,t.doSearch(),t.counterList()})},counterList:function(){var e=this;(function(e){return g(m.CounterList,e)})({longitude:this.longitude,latitude:this.latitude,city:this.currentLocation}).then(function(t){console.log(t.data),t.data.length>0?(e.isShow=!1,t.data.forEach(function(e){var t={lat:e.latitude,lng:e.longitude},i=new BMap.Point(t.lng,t.lat),n=new BMap.Marker(i);A.addOverlay(n)}),e.panelList=t.data):e.isShow=!0})},getProvinces:function(){var e=this,t={};g(m.Provinces).then(function(i){i.data.forEach(function(i){var n;(n={province:i.text},g(m.Cities,n)).then(function(n){var o=[];n.data.forEach(function(e){o.push(e.text)}),t[i.text]=o,w=t,e.citySlots[0].values=u()(w),e.citySlots[2].values=s()(w)[0]})})})},choiceArea:function(){this.popupVisible=!0,this.getProvinces()},cancleaddress:function(){this.popupVisible=!1},selectaddress:function(){this.popupVisible=!1,this.doSearch(),this.counterList()},onCityChange:function(e,t){console.log(e,t),e.setSlotValues(1,w[t[0]]),this.areaText=t[1],this.currentLocation=t[1]},doSearch:function(){var e=new BMap.Point(this.longitude,this.latitude);A.centerAndZoom(e,11),A.enableScrollWheelZoom(!0),A.setCurrentCity(this.currentLocation);var t={map:A,autoViewport:!1,selectFirstResult:!1};new BMap.LocalSearch(A,{renderOptions:t})},infohtmlset:function(e,t){this.targetLatitude=e.latitude,this.targetLongitude=e.longitude,this.infoWindow(e,t)},infoWindow:function(e,t){var i={lat:e.latitude,lng:e.longitude},n=new BMap.Point(i.lng,i.lat),o=new BMap.Marker(n);A.addOverlay(o),A.centerAndZoom(n,11);var a='<div style="font-size:14px">欧舒丹精品店</div><div style="margin: 6px 0;color:#333;font-size:14px;">'+e.counterName+'</div><div style="font-size:12px;color:#666;">'+e.address+"</div>";console.log(a),(M=new BMap.InfoWindow(a,{width:250,minHeight:45})).disableCloseOnClick(),o.addEventListener("click",function(){A.openInfoWindow(M,n)}),console.log(M),A.enableScrollWheelZoom(!0),A.openInfoWindow(M,A.getCenter())},goDetails:function(){console.log(this.currentLocation),location.href="https://api.map.baidu.com/direction?origin=latlng:"+this.latitude+","+this.longitude+"|name:我的位置&destination="+this.address+"&mode=driving&region="+this.currentLocation+"&output=html&src=webapp.baidu.openAPIdemo"},handler:function(e){e.preventDefault()}},watch:{popupVisible:function(e){e?document.addEventListener("touchmove",this.handler,!1):document.removeEventListener("touchmove",this.handler,!1)}}},I={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"map-warpper"},[i("div",{staticClass:"map-box",attrs:{id:"map"}}),e._v(" "),e.panelList.length>0?i("div",{staticClass:"panel-box"},e._l(e.panelList,function(t,n){return i("div",{key:n,staticClass:"panel-item",on:{click:function(i){e.infohtmlset(t,n)}}},[e._m(0,!0),e._v(" "),i("div",{staticClass:"text-box"},[i("h2",[e._v(e._s(t.counterName))]),e._v(" "),i("p",[e._v(e._s(t.address))]),e._v(" "),i("div",{staticClass:"tag"},[i("span",{directives:[{name:"show",rawName:"v-show",value:t.phone,expression:"item.phone"}]},[e._v(e._s(t.phone))]),e._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:t.businessHour,expression:"item.businessHour"}]},[e._v(e._s(t.businessHour))])])])])})):e._e(),e._v(" "),e.isShow?i("div",{staticClass:"panel-box"},[i("div",{staticStyle:{"text-align":"center: color: #666666","font-size":"14px","line-height":"32px"}},[e._v("当前门店没有查询到相关的门店信息！")])]):e._e(),e._v(" "),i("div",{staticClass:"select-box",on:{click:e.choiceArea}},[e._m(1),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.areaText,expression:"areaText"}],attrs:{placeholder:"请选择省市",type:"text",readonly:"",disabled:""},domProps:{value:e.areaText},on:{input:function(t){t.target.composing||(e.areaText=t.target.value)}}})]),e._v(" "),i("mt-popup",{staticClass:"mint-popup-4",attrs:{position:"bottom","popup-transition":"popup-fade"},model:{value:e.popupVisible,callback:function(t){e.popupVisible=t},expression:"popupVisible"}},[i("div",{staticClass:"picker-toolbar"},[i("span",{staticClass:"mint-datetime-action mint-datetime-cancel",on:{click:e.cancleaddress}},[e._v("取消")]),e._v(" "),i("span",{staticClass:"mint-datetime-action mint-datetime-confirm",on:{click:e.selectaddress}},[e._v("确定")])]),e._v(" "),i("mt-picker",{attrs:{slots:e.citySlots,"visible-item-count":5},on:{change:e.onCityChange}})],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"logo-box"},[t("img",{attrs:{src:i("4Uwr"),alt:""}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"img-box"},[t("img",{attrs:{src:i("R2WG"),alt:""}})])}]};var C=[{path:"/",component:i("VU/8")(y,I,!1,function(e){i("2hDx")},"data-v-5a503b3c",null).exports}],L=(i("JfbQ"),i("d8/S"),i("2rmZ"),i("Au9i"));n.a.component(L.Picker.name,L.Picker),n.a.component(L.Popup.name,L.Popup),n.a.use(o.a);var R=new o.a({routes:C});new n.a({el:"#app",router:R,render:function(e){return e(c)}})},"d8/S":function(e,t){},zKdP:function(e,t){}},["aPF0"]);
//# sourceMappingURL=storeSearch.js.map